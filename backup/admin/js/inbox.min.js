"use strict";!function(n,e,a,o){o.emailsWorkSpace=null,o.emails=[],o.$emailContentWrapper=null,o.showReply=!1,o.windowWidth=0,o.inboxBreakpoint=768,o.loadEmails=function(){var t=new n.Deferred;return e.getLatestEmails().done(function(i){o.emails=i.reduce(function(e,a){return e.items?e.items.concat(a.items):e.concat(a.items)}),a.getEmailListTemplate().done(function(e){var a=Handlebars.compile(e)(i);t.resolve(a)})}),t.promise()},o.buildMessage=function(i){var t=new n.Deferred;return a.getEmailMessageTemplate().done(function(e){var a=Handlebars.compile(e)(i);t.resolve(a)}),t.promise()},o.emailListToggle=function(e){o.windowWidth<=o.inboxBreakpoint&&(e?o.emailsWorkSpace.addClass("message-loaded").css({transform:"translate3d("+-o.windowWidth+"px, 0, 0)"}):o.emailsWorkSpace.removeClass("message-loaded").css({transform:""}))},o.searchEmail=function(){var a=n(this),i=a.data("email"),e=o.emails.find(function(e){return e.id===i});e&&(o.emailListToggle(!0),o.buildMessage(e).done(function(e){o.$emailContentWrapper.html(e),a.addClass("selected").siblings().removeClass("selected"),n(".email-reply-wrapper").removeClass("d-none")}))},o.startReply=function(){if(!o.showReply){o.showReply=!0;var e=n("#reply-email").removeClass("d-none");n(this).addClass("d-none"),ClassicEditor.create(e[0]).catch(function(e){console.error(e)})}},o.setInboxWorkspaceWidth=function(){o.windowWidth=n(window).outerWidth(),o.windowWidth<=o.inboxBreakpoint&&o.emailsWorkSpace.css({"max-width":o.windowWidth})},n(function(){var a=n(".emails-wrapper");o.$emailContentWrapper=n(".email-content-wrapper"),o.emailsWorkSpace=n(".emails-ws"),a.data("loaded")||o.loadEmails().done(function(e){a.html(e),a.data("loaded",!0)}),a.on("click","[data-email]",o.searchEmail),n(".start-reply").on("click",o.startReply),n(".email-list-toggle").on("click",function(){o.emailListToggle(!1)}),n(window).on("resize",o.setInboxWorkspaceWidth),o.setInboxWorkspaceWidth()})}(jQuery,dcData,dcTemplates,{});